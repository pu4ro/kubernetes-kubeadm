---
# Kubernetes sysctl parameters
k8s_sysctl_params:
  # Enable IP forwarding
  net.ipv4.ip_forward: 1

  # Enable bridge netfilter
  net.bridge.bridge-nf-call-iptables: 1
  net.bridge.bridge-nf-call-ip6tables: 1

  # Disable swap
  vm.swappiness: 0

  # Maximum number of open files
  fs.file-max: 2097152

  # Maximum number of inotify watches
  fs.inotify.max_user_watches: 524288
  fs.inotify.max_user_instances: 512

  # Connection tracking
  net.netfilter.nf_conntrack_max: 1048576

  # Network tuning
  net.ipv4.tcp_max_syn_backlog: 8096
  net.core.netdev_max_backlog: 16384
  net.core.somaxconn: 32768

  # Memory settings
  vm.max_map_count: 262144

# Kernel modules required for Kubernetes
k8s_kernel_modules:
  - br_netfilter
  - overlay
  - ip_vs
  - ip_vs_rr
  - ip_vs_wrr
  - ip_vs_sh
  - nf_conntrack
