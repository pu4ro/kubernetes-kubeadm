---
# Update Node IP Role - Default Variables

# Old IP address to replace (required)
# old_ip: "192.168.1.100"

# New IP address (defaults to current ansible_host)
# new_ip: "{{ ansible_host }}"

# Kubernetes manifests directory
k8s_manifests_dir: /etc/kubernetes/manifests

# Kubernetes config directory
k8s_config_dir: /etc/kubernetes

# Files to update in manifests directory
k8s_manifest_files:
  - etcd.yaml
  - kube-apiserver.yaml
  - kube-controller-manager.yaml
  - kube-scheduler.yaml

# Kubeconfig files to update
k8s_kubeconfig_files:
  - admin.conf
  - kubelet.conf
  - controller-manager.conf
  - scheduler.conf

# Whether to update /etc/hosts
update_etc_hosts: true

# Whether to regenerate certificates (if IP is in cert SANs)
regenerate_certs: false

# Whether to force new etcd cluster (preserves data, resets cluster membership)
# This uses --force-new-cluster flag to migrate etcd to new IP while keeping data
# Default: true (recommended for IP changes)
force_new_etcd_cluster: true

# Whether to reset etcd data directory (WARNING: This will lose all etcd data!)
# Only use this if force_new_etcd_cluster fails
# Required when IP changes because etcd stores member info in its data directory
reset_etcd_data: false

# Whether to restart services after updating files
# This is required because kubelet caches static pod manifests
restart_services: true

# Domain communication settings (from group_vars/all.yml)
# These are used when regenerating certificates to include proper SANs
# enable_domain_communication: true
# domain_suffix: "k8s.local"
# api_domain: "k8s-api.internal"
# kube_vip_address: "192.168.135.69"
