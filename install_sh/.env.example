# Kubernetes Cluster Configuration
# Copy this file to .env and adjust values for your environment
# Usage: cp .env.example .env

#############################################################################
# Kubernetes Version Configuration
#############################################################################
KUBERNETES_VERSION=1.27.14
CONTAINERD_VERSION=1.7.6
POD_SUBNET=10.244.0.0/16
SERVICE_SUBNET=10.96.0.0/12

#############################################################################
# System Configuration
#############################################################################
TIMEZONE=Asia/Seoul

#############################################################################
# Network Configuration
#############################################################################
# Master node IP (auto-detected if empty)
MASTER_IP=

# Kube-VIP Configuration (for HA setup)
KUBE_VIP_ADDRESS=192.168.135.30
KUBE_VIP_INTERFACE=ens18

#############################################################################
# Repository Configuration - RHEL/CentOS
#############################################################################
# Enable local YUM repository
USE_LOCAL_REPO=true

# Enable ISO repository
USE_ISO_REPO=true
ISO_MOUNT_POINT=/mnt/cdrom
ISO_FILE_PATH=/root/rhel-9.4-x86_64-dvd.iso

# Local YUM repository directory
YUM_REPO_DIR=/root/yum-repo

# Repository web server port
REPO_WEB_PORT=8080

#############################################################################
# Repository Configuration - Ubuntu
#############################################################################
# Enable local APT repository
USE_LOCAL_APT_REPO=true

# Local APT repository URL
APT_REPO_URL=http://192.168.135.1:8080/ubuntu

# Ubuntu mirror URL (used when USE_LOCAL_APT_REPO=false)
APT_REPO_MIRROR=http://kr.archive.ubuntu.com/ubuntu

# Ubuntu distribution (jammy=22.04, focal=20.04, etc)
APT_REPO_DISTRIBUTION=jammy

# APT components
APT_COMPONENTS=main restricted universe multiverse

#############################################################################
# Container Registry Configuration
#############################################################################
# Insecure registries (space-separated list)
INSECURE_REGISTRIES="cr.makina.rocks harbor.runway.test"

#############################################################################
# High Availability Configuration
#############################################################################
# Enable HA master setup
MASTER_HA=false

# Number of master nodes (for HA)
MASTER_COUNT=1

#############################################################################
# Optional Features
#############################################################################
# Install GPU driver
INSTALL_GPU_DRIVER=false
GPU_DRIVER_VERSION=570.124.06

# Enable NVIDIA container runtime
NVIDIA_RUNTIME=false

# Install NFS provisioner
INSTALL_NFS_PROVISIONER=false
NFS_SERVER_PATH=/nfs/data

#############################################################################
# Network Plugin Configuration
#############################################################################
# Network plugin (flannel, calico, cilium)
NETWORK_PLUGIN=flannel

# Flannel backend (vxlan, host-gw)
FLANNEL_BACKEND=vxlan

#############################################################################
# Storage Configuration
#############################################################################
# Default storage class
DEFAULT_STORAGE_CLASS=nfs-client

# NFS server (for NFS storage class)
NFS_SERVER=
NFS_PATH=/nfs/data

#############################################################################
# Advanced Configuration
#############################################################################
# Enable IPv6
ENABLE_IPV6=false

# Enable metrics server
INSTALL_METRICS_SERVER=true

# Enable ingress controller
INSTALL_INGRESS_NGINX=false

# Enable cert-manager
INSTALL_CERT_MANAGER=false

#############################################################################
# Logging and Monitoring
#############################################################################
# Enable verbose logging
VERBOSE=false

# Log file path
LOG_FILE=/var/log/k8s-setup.log

#############################################################################
# Security Configuration
#############################################################################
# Disable SELinux (RHEL/CentOS only)
DISABLE_SELINUX=true

# Disable firewall
DISABLE_FIREWALL=true

# Disable swap
DISABLE_SWAP=true

#############################################################################
# Performance Tuning
#############################################################################
# Maximum number of connections
NF_CONNTRACK_MAX=1000000

# Maximum file descriptors
FS_FILE_MAX=2097152

# inotify instances
FS_INOTIFY_MAX_USER_INSTANCES=8192

# inotify watches
FS_INOTIFY_MAX_USER_WATCHES=524288
