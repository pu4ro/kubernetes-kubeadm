# NFS Server Configuration
# Copy this file to .env.nfs and configure your values

# NFS exports directory (where to share files from)
# Multiple exports can be configured (comma-separated)
NFS_EXPORT_PATHS="/data/nfs/share1,/data/nfs/share2,/opt/kubernetes-storage"

# NFS export options for each path (comma-separated, matching order of paths)
# Common options:
#   rw          - read-write access
#   ro          - read-only access
#   sync        - synchronous writes
#   async       - asynchronous writes
#   no_subtree_check - disable subtree checking (recommended)
#   no_root_squash   - allow root access from client
#   root_squash      - map root to anonymous user (more secure)
#   all_squash       - map all users to anonymous user
#
# Format: "network(options)"
# Examples:
#   "*(rw,sync,no_subtree_check,no_root_squash)"           - Allow all networks
#   "192.168.1.0/24(rw,sync,no_subtree_check)"             - Specific subnet
#   "192.168.1.10(rw) 192.168.1.20(ro)"                    - Multiple clients
#   "*.example.com(rw,sync,no_subtree_check)"              - Domain wildcard

NFS_EXPORT_OPTIONS="*(rw,sync,no_subtree_check,no_root_squash),192.168.0.0/16(rw,sync,no_subtree_check,no_root_squash),10.0.0.0/8(rw,sync,no_subtree_check)"

# Directory ownership (optional, defaults to root:root)
NFS_EXPORT_OWNER="root"
NFS_EXPORT_GROUP="root"

# Directory permissions (optional, defaults to 0755)
NFS_EXPORT_MODE="0777"

# Auto-start NFS server on boot
NFS_ENABLE_ON_BOOT="true"

# NFS server ports (optional, for firewall configuration)
NFS_PORT=2049
MOUNTD_PORT=20048
STATD_PORT=662

# Example configurations for different scenarios:

# Example 1: Single shared directory for Kubernetes PVs
# NFS_EXPORT_PATHS="/data/kubernetes-pvs"
# NFS_EXPORT_OPTIONS="*(rw,sync,no_subtree_check,no_root_squash)"
# NFS_EXPORT_MODE="0777"

# Example 2: Multiple directories with different access levels
# NFS_EXPORT_PATHS="/data/public,/data/restricted,/data/readonly"
# NFS_EXPORT_OPTIONS="*(rw,sync,no_subtree_check),192.168.1.0/24(rw,sync,no_subtree_check),*(ro,sync,no_subtree_check)"
# NFS_EXPORT_MODE="0755"

# Example 3: Secure setup with specific subnet
# NFS_EXPORT_PATHS="/data/secure"
# NFS_EXPORT_OPTIONS="192.168.135.0/24(rw,sync,no_subtree_check,root_squash)"
# NFS_EXPORT_OWNER="nobody"
# NFS_EXPORT_GROUP="nogroup"
# NFS_EXPORT_MODE="0755"
